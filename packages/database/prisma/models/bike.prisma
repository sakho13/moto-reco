model MBike {
  id           String @id @default(cuid(2))
  name         String
  displacement Float // 排気量/cc
  modelYear    Int    @map("model_year")
  serialNumber String @map("serial_number")

  createdAt     DateTime   @default(now()) @map("created_at")
  updatedAt     DateTime   @updatedAt @map("updated_at")
  settingStatus BikeStatus @default(INACTIVE) @map("setting_status") // 設定状態

  bikeMaintenanceTypes MMaintenanceType[]
  userBikes            TUserBike[]
}

model MMaintenanceType {
  id String @id @default(cuid(2))

  bikeId String          @map("bike_id")
  type   MaintenanceType

  recommendedMileage Int @map("recommended_mileage") // 推奨走行距離/km
  recommendedPeriod  Int @map("recommended_period") // 推奨期間/月

  bike MBike @relation(fields: [bikeId], references: [id])
}

model TUserBike {
  id     String @id @default(cuid(2))
  bikeId String @map("bike_id")

  bike          MBike           @relation(fields: [bikeId], references: [id])
  userBikeFuels TUserBikeFuel[]
}

model TUserBikeFuel {
  id         String @id @default(cuid(2))
  userBikeId String @map("user_bike_id")

  amount     Float // 給油量/L
  price      Int // 給油価格/円
  mileage    Int // 給油時総走行距離/km
  refueledAt DateTime @map("refueled_at") // 給油日時

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  userBike TUserBike @relation(fields: [userBikeId], references: [id])
}

// Enums

enum BikeStatus {
  INACTIVE
  ACTIVE
}

enum MaintenanceType {
  // ブレーキ装置
  BRAKE_FLUID
  FRONT_BRAKE_PAD
  REAR_BRAKE_PAD
  MASTER_CYLINDER_CUP
  BRAKE_CALIPER_SEAL
  BRAKE_CABLE

  // エンジン
  SPARK_PLUG
  COOLANT
  ENGINE_OIL
  OIL_CLEANER

  // 動力伝達装置
  TRANSMISSION_OIL
  DRIVE_CHAIN
  DRIVE_BELT

  // タイヤ
  FRONT_TIRE
  REAR_TIRE

  // 電気装置
  BATTERY
  LIGHT
  TURN_SIGNAL
  HORN
}
